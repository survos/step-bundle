{# File: templates/step/slides.html.twig #}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ code|default('Steps') }} — Slides</title>

  {# Reveal CSS (CDN) #}
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5/dist/reset.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5/dist/reveal.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5/dist/theme/black.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5/plugin/highlight/monokai.css">

  {# Bundle CSS (published at /bundles/survosstep/steps.css) #}
  <link rel="stylesheet" href="{{ asset('bundles/survosstep/steps.css') }}">
</head>
<body>
<div class="reveal">
  <div class="slides">

    {# Title #}
    <section>
      <div class="slide-shell">
        <header class="slide-header">
          <h1 class="slide-title">{{ code|default('Steps')|replace({'-':' '})|title }}</h1>
          {% if app is defined %}
            <a class="back-link" href="{{ path('app_home') }}">← Back to Home</a>
          {% endif %}
        </header>

        <div class="slide-content" style="display:flex;flex-direction:column;align-items:center;justify-content:center;">
          <p>A Castor-powered slideshow</p>
        </div>

        <footer class="slide-footer"><span>Use ← → • <kbd>F</kbd> fullscreen</span></footer>
      </div>
    </section>

    {# Slides — controller passes `tasks` #}
    {% for task in tasks %}
      {% set taskTitle = task.title|default(task.name|default(task.code|default('Step'))) %}
      {% set taskName  = task.name|default(task.code|default('')) %}
      <section>
        <div class="slide-shell">
          <header class="slide-header">
            <h2 class="slide-title">{{ taskTitle }}</h2>
          </header>

          <div class="slide-content">
            {% if task.description %}<p class="slide-description">{{ task.description }}</p>{% endif %}
            {% if task.bullets %}<ul>{% for b in task.bullets %}<li>{{ b }}</li>{% endfor %}</ul>{% endif %}

            {% if task.actions %}
              {% for a in task.actions %}
                <div class="action action-{{ (a.lang ?? a.language ?? a.type ?? 'text')|lower }}">
                  {{ render_action(a)|raw }}
                </div>
              {% endfor %}
            {% endif %}
          </div>

          <footer class="slide-footer">
            {% if taskName %}<span>Run: <code>castor {{ taskName }}</code></span>{% endif %}
          </footer>
        </div>
      </section>
    {% endfor %}

    <section>
      <div class="slide-shell">
        <header class="slide-header"><h2 class="slide-title">Done ✔</h2></header>
        <div class="slide-content" style="display:flex;align-items:center;justify-content:center;"><p>Questions?</p></div>
        <footer class="slide-footer"><span>Thanks!</span></footer>
      </div>
    </section>

  </div>
</div>

{# Reveal JS (CDN) #}
<script src="https://cdn.jsdelivr.net/npm/reveal.js@5/dist/reveal.js"></script>
<script src="https://cdn.jsdelivr.net/npm/reveal.js@5/plugin/highlight/highlight.js"></script>
<script>
  Reveal.initialize({
    hash: true,
    slideNumber: true,
    controls: true,
    progress: true,
    center: false, // we use sticky header/footer
    transition: 'slide',
    plugins: [ RevealHighlight ]
  });
</script>
</body>
</html>
